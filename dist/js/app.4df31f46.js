(function(t){function e(e){for(var r,s,o=e[0],c=e[1],u=e[2],p=0,f=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},a={app:0},i=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"07f1":function(t,e,n){"use strict";var r=n("ef64"),a=n.n(r);a.a},1:function(t,e){},2:function(t,e){},3:function(t,e){},4:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"primary",dark:""}}),n("v-content",[n("v-container",{class:{"fill-height":t.isLoading}},[t.isLoading?n("v-progress-circular",{staticClass:"ma-auto",attrs:{size:50,color:"primary",indeterminate:""}}):n("router-view"),n("v-snackbar",{attrs:{color:t.alertMessage.type,timeout:3e3},model:{value:t.showAlert,callback:function(e){t.showAlert=e},expression:"showAlert"}},[t._v(t._s(t.alertMessage.message)),n("v-btn",{attrs:{dark:"",text:""},on:{click:function(e){t.showAlert=!1}}},[t._v("Close")])],1)],1)],1)],1)},i=[],s={name:"App",beforeCreate:function(){var t=this;this.$store.dispatch("initWeb3").then((function(){t.$store.dispatch("initContract").then((function(){t.isLoading=!1}))}))},data:function(){return{isLoading:!0,showAlert:!1,alertMessage:{}}},created:function(){window.$eventHub.$on("showAlert",this.showAlertSnackBar)},beforeDestroy:function(){window.$eventHub.$off("showAlert")},methods:{showAlertSnackBar:function(t){this.alertMessage=t,this.showAlert=!0}}},o=s,c=n("2877"),u=n("6544"),l=n.n(u),p=n("7496"),f=n("40dc"),d=n("8336"),m=n("a523"),h=n("a75b"),b=n("490a"),v=n("2db4"),y=Object(c["a"])(o,a,i,!1,null,null,null),g=y.exports;l()(y,{VApp:p["a"],VAppBar:f["a"],VBtn:d["a"],VContainer:m["a"],VContent:h["a"],VProgressCircular:b["a"],VSnackbar:v["a"]});var w=n("8c4f"),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-row",{attrs:{cols:"12"}},[n("v-btn",{staticClass:"ma-2",attrs:{outlined:""}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v(" Secret Santa Event")],1)],1),n("v-row",{attrs:{cols:"12"}},["registration"===t.state?n("v-form",{ref:"form",staticClass:"full-width",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{rules:[function(t){return!!t||"Name is required"}],label:"Name",required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("v-btn",{staticClass:"mr-4",attrs:{disabled:!t.valid,color:"success"},on:{click:t.create}},[t._v("Create")])],1):"waitingForConfirmation"===t.state?n("div",[n("h3",[t._v("Please confirm the transaction on MetaMask.")])]):"waitingForMined"===t.state?n("div",[n("h3",[t._v("Please be patient while your transaction is getting Mined.")])]):t._e()],1),t._l(t.events,(function(e,r){return n("ContractLink",{key:"event"+r,attrs:{event:e},on:{removed:t.getEvents}})}))],2)},j=[],P=(n("a4d3"),n("4de4"),n("4160"),n("d81d"),n("b0c0"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("96cf"),n("ade3")),_=n("8beb"),S=n("2f62"),C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-banner",{attrs:{"single-line":""},scopedSlots:t._u([{key:"actions",fn:function(){return[t.showDelete?n("v-btn",{attrs:{loading:"waitingForMined"===t.state,text:"",color:"error"},on:{click:function(e){return t.removeContract(t.event.contractAdress)}}},[t._v("Delete")]):t._e()]},proxy:!0}])},["default"===t.state?n("div",[n("router-link",{attrs:{to:{name:"secretSanta",params:{id:t.event.contractAdress}}}},[t._v(t._s(t.event.name))]),n("v-icon",[t._v("mdi-account-multiple")]),n("b",[t._v(t._s(t.event.participants))])],1):"waitingForConfirmation"===t.state?n("p",{staticClass:"mb-0"},[t._v("Please confirm the transaction on MetaMask.")]):"waitingForMined"===t.state?n("p",{staticClass:"mb-0"},[t._v("Please wait for the transaction to be mined.")]):t._e()])},x=[];function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){Object(P["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var E={name:"contract-link",props:{event:{type:Object,required:!0}},data:function(){return{state:"default"}},computed:k({},Object(S["b"])({account:"account",contract:"contractInstance"}),{showDelete:function(){return this.event.owner===this.account&&this.event.isOpen&&"waitingForConfirmation"!==this.state}}),methods:{removeContract:function(t){var e,n=this;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:return this.state="waitingForConfirmation",e=function(t){return n.state=t?"default":"waitingForMined"},r.next=4,regeneratorRuntime.awrap(this.contract().methods.deleteParticpant(t).send({gas:3e6,from:this.account},e.bind(this)).on("receipt",(function(){return n.state="default"})).on("error",(function(t){window.$eventHub.$emit("showAlert",{message:"Error processing transaction.",type:"error"})})));case 4:this.$emit("removed");case 5:case"end":return r.stop()}}),null,this)}}},T=E,R=(n("07f1"),n("e4e5")),$=n("132d"),D=Object(c["a"])(T,C,x,!1,null,null,null),F=D.exports;l()(D,{VBanner:R["a"],VBtn:d["a"],VIcon:$["a"]});var V=n("6314"),A=n.n(V),B="0xC89b93B1e54c7D96e9866CBE038C3B9449eCf492",I=[{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"getSecretSantaEvent",outputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"string",name:"",type:"string"},{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getSecretSantaEvents",outputs:[{internalType:"address[]",name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"string",name:"_name",type:"string"}],name:"newSecretSantaEvent",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"addressToBeDeleted",type:"address"}],name:"removeSecretSantaEvent",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"secretSantaAddresses",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],L=[{inputs:[{internalType:"address",name:"_address",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{constant:!1,inputs:[],name:"closeRegistration",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"addressToBeDeleted",type:"address"}],name:"deleteParticpant",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"getEventStatus",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"_address",type:"address"}],name:"getParticpant",outputs:[{internalType:"string",name:"",type:"string"},{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getParticpants",outputs:[{internalType:"address[]",name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getRegistration",outputs:[{internalType:"string",name:"",type:"string"},{internalType:"string",name:"",type:"string"},{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getSecretSanta",outputs:[{internalType:"string",name:"",type:"string"},{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isOpen",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isOwner",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"participantAccts",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"string",name:"_name",type:"string"},{internalType:"string",name:"_wishlist",type:"string"}],name:"register",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}];window.ethereum.enable();var H=new A.a(window.web3.currentProvider),W=new Promise((function(t,e){var n=window.web3;if("undefined"!==typeof n){var r=new A.a(n.currentProvider);t({web3:function(){return r}})}else e(new Error("Unable to connect to Metamask"))})).then((function(t){return new Promise((function(e,n){var r;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(window.ethereum.enable());case 2:r=n.sent,t=Object.assign({},t,{account:r[0]}),e(t);case 5:case"end":return n.stop()}}))}))})),q=function(t){return new Promise((function(t){return t(new H.eth.Contract(I,B))}))},N=function(t){return new Promise((function(e){return e(new H.eth.Contract(L,t))}))};function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){Object(P["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var U={name:"home",components:{ContractLink:F},computed:J({},Object(S["b"])({account:"account",contract:"contractInstance"})),data:function(){return{name:null,events:[],valid:!1,state:"registration"}},created:function(){this.getEvents()},methods:{create:function(){var t,e=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return this.state="waitingForConfirmation",t=function(t){return e.state=t?"default":"waitingForMined"},n.next=4,regeneratorRuntime.awrap(this.contract().methods.newSecretSantaEvent(this.name).send({gas:3e6,from:this.account},t.bind(this)).on("receipt",(function(){return e.state="default"})).on("error",(function(t){window.$eventHub.$emit("showAlert",{message:"Error processing transaction.",type:"error"})})));case 4:this.getEvents();case 5:case"end":return n.stop()}}),null,this)},getSecretSantaEvent:function(t){return this.contract().methods.getSecretSantaEvent(t).call({from:this.account}).then((function(t){return t}))},getSecretSantaDetails:function(t){var e;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(N(t));case 2:return e=n.sent,n.abrupt("return",e.methods.getEventStatus().call({from:this.account}).then((function(t){return t})));case 4:case"end":return n.stop()}}),null,this)},getEvents:function(){var t,e=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.contract().methods.getSecretSantaEvents().call().then((function(t){return t.map((function(t){return e.getSecretSantaEvent(t)}))})));case 2:t=n.sent,Promise.all(t).then((function(t){var n=t.map((function(t){return e.getSecretSantaDetails(t[0])}));Promise.all(n).then((function(n){e.events=Object(_["a"])(t,n).map((function(t){return{contractAdress:t[0][0],owner:t[0][1],name:t[0][2],created_at:t[0][3],participants:t[1][0],isOpen:t[1][1]}}))}))}));case 4:case"end":return n.stop()}}),null,this)}}},Y=U,G=n("4bd4"),K=n("0fd9"),Q=n("8654"),X=Object(c["a"])(Y,O,j,!1,null,null,null),Z=X.exports;l()(X,{VBtn:d["a"],VContainer:m["a"],VForm:G["a"],VIcon:$["a"],VRow:K["a"],VTextField:Q["a"]});var tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{"text-center":"",wrap:""}},[n("v-flex",{attrs:{xs12:""}},[t.isLoading?n("div",[t.isLoading?n("v-progress-circular",{staticClass:"ma-auto",attrs:{size:50,color:"primary",indeterminate:""}}):t._e()],1):t.isOpen?n("div",["default"===t.state?n("v-form",{ref:"form",staticClass:"full-width",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{label:"Name",rules:[function(t){return!!t||"Name is required"}]},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),n("v-text-field",{attrs:{label:"Wishlist",rules:[function(t){return!!t||"Wishlist is required"}]},model:{value:t.form.wishlist,callback:function(e){t.$set(t.form,"wishlist",e)},expression:"form.wishlist"}}),n("v-btn",{staticClass:"mr-4",attrs:{disabled:!t.valid,color:"success"},on:{click:t.register}},[t._v(t._s(t.registered?"Update":"Participate"))])],1):"waitingForConfirmation"===t.state?n("div",[n("h3",[t._v("Please confirm the transaction on MetaMask.")])]):"waitingForMined"===t.state?n("div",[n("h3",[t._v("Please be patient while your transaction is getting Mined.")])]):"final"===t.state?n("div",[n("h3",[t._v("Thank you for participating "+t._s(t.name)+", please be patient while waiting for other participants!")]),n("v-btn",{on:{click:function(e){t.state="default"}}},[t._v("Edit details")])],1):t._e()],1):n("div",[n("h3",[t._v("Your secret santa is "+t._s(t.secretSanta.name)+", he/she wants "+t._s(t.secretSanta.wishlist)+" for christmas!")])]),t.isOwner&&t.isOpen?n("div",[n("CloseRegistration",{on:{close:t.getSecretSanta}}),t._l(t.participants,(function(e,r){return n("Participant",{key:"participant"+r,attrs:{participant:e},on:{removed:t.checkOwner}})}))],2):t._e()],1)],1)},et=[],nt=n("4aa6"),rt=n("fde9"),at=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["default"===t.state?n("v-btn",{attrs:{color:"primary"},on:{click:t.closeRegistration}},[t._v("Close Registration")]):"waitingForConfirmation"===t.state?n("div",[n("h3",[t._v("Please confirm the transaction on MetaMask.")])]):"waitingForMined"===t.state?n("div",[n("h3",[t._v("Please be patient while your transaction is getting Mined.")])]):t._e()],1)},it=[];function st(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?st(Object(n),!0).forEach((function(e){Object(P["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ct={data:function(){return{state:"default"}},computed:ot({},Object(S["b"])({account:"account",contract:"santaContractInstance"})),methods:{closeRegistration:function(){var t,e=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return this.state="waitingForConfirmation",t=function(t){return e.state=t?"default":"waitingForMined"},n.next=4,regeneratorRuntime.awrap(this.contract().methods.closeRegistration().send({gas:3e6,from:this.account},t.bind(this)).on("receipt",(function(){return e.state="default"})).on("error",(function(t){window.$eventHub.$emit("showAlert",{message:"Error processing transaction.",type:"error"})})));case 4:this.$emit("close");case 5:case"end":return n.stop()}}),null,this)}}},ut=ct,lt=Object(c["a"])(ut,at,it,!1,null,null,null),pt=lt.exports;l()(lt,{VBtn:d["a"]});var ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-banner",{attrs:{"single-line":""},scopedSlots:t._u([{key:"actions",fn:function(){return["waitingForConfirmation"!==t.state?n("v-btn",{attrs:{loading:"waitingForMined"===t.state,text:"",color:"error"},on:{click:function(e){return t.removeParticipant()}}},[t._v("Delete")]):t._e()]},proxy:!0}])},["default"===t.state?n("span",[t._v(t._s(t.participant.name))]):"waitingForConfirmation"===t.state?n("p",{staticClass:"mb-0"},[t._v("Please confirm the transaction on MetaMask.")]):"waitingForMined"===t.state?n("p",{staticClass:"mb-0"},[t._v("Please wait for the transaction to be mined.")]):t._e()])},dt=[];function mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(n),!0).forEach((function(e){Object(P["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var bt={props:{participant:{type:Object,required:!0}},data:function(){return{state:"default"}},computed:ht({},Object(S["b"])({account:"account",contract:"santaContractInstance"})),methods:{removeParticipant:function(){var t,e=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return this.state="waitingForConfirmation",t=function(t){return e.state=t?"default":"waitingForMined"},n.next=4,regeneratorRuntime.awrap(this.contract().methods.deleteParticpant(this.participant.address).send({gas:3e6,from:this.account},t.bind(this)).on("receipt",(function(){e.state="default",e.$emit("removed")})).on("error",(function(t){e.state="default",window.$eventHub.$emit("showAlert",{message:"Error processing transaction.",type:"error"})})));case 4:case"end":return n.stop()}}),null,this)}}},vt=bt,yt=Object(c["a"])(vt,ft,dt,!1,null,null,null),gt=yt.exports;function wt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wt(Object(n),!0).forEach((function(e){Object(P["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}l()(yt,{VBanner:R["a"],VBtn:d["a"]});var jt={name:"MainContract",components:{CloseRegistration:pt,Participant:gt},beforeCreate:function(){var t=this;this.$store.dispatch("initWeb3").then((function(){t.$store.dispatch("initSantaContract",t.$route.params.id)}))},data:function(){return{valid:!1,isOwner:!1,isOpen:!0,registered:!1,participants:[],form:{name:null,wishlist:null},secretSanta:{name:null,wishlist:null},state:null,isLoading:!0}},created:function(){var t=this;setTimeout((function(){Promise.all([t.checkOwner(),t.getSecretSanta()]).then((function(){t.isLoading=!1}))}),2e3)},computed:Ot({},Object(S["b"])({account:"account",contract:"santaContractInstance"})),methods:{register:function(){var t,e=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return this.state="waitingForConfirmation",t=function(t){return e.state=t?"default":"waitingForMined"},n.next=4,regeneratorRuntime.awrap(this.contract().methods.register(this.form.name,this.form.wishlist).send({gas:3e6,from:this.account},t.bind(this)).on("receipt",(function(){return e.state="final"})).on("error",(function(t){window.$eventHub.$emit("showAlert",{message:"Error processing transaction.",type:"error"})})));case 4:this.isOwner&&this.getParticpants();case 5:case"end":return n.stop()}}),null,this)},checkOwner:function(){var t=this;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.contract().methods.getRegistration().call({from:this.account}).then((function(e){t.registered=!Object(nt["a"])(e[0]),t.registered&&(t.name=e[0],t.wishlist=e[1])})));case 2:return e.next=4,regeneratorRuntime.awrap(this.contract().methods.isOwner().call({from:this.account}).then((function(e){t.isOwner=e,t.isOwner&&t.getParticpants()})));case 4:this.state=this.registered?"final":"default";case 5:case"end":return e.stop()}}),null,this)},getParticpant:function(t){return this.contract().methods.getParticpant(t).call({from:this.account}).then((function(e){return Object(rt["a"])(e,{address:t})}))},getSecretSanta:function(){var t=this;return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.contract().methods.getSecretSanta().call({from:this.account}).then((function(e){Object(nt["a"])(e[0])||(t.secretSanta={name:e[0],wishlist:e[1]},t.isOpen=!1)})));case 2:case"end":return e.stop()}}),null,this)},getParticpants:function(){var t,e=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.contract().methods.getParticpants().call().then((function(t){return t.map((function(t){return e.getParticpant(t)}))})));case 2:t=n.sent,Promise.all(t).then((function(t){e.participants=t.map((function(t){return{name:t[0],wishlist:t[1],address:t.address}}))}));case 4:case"end":return n.stop()}}),null,this)}}},Pt=jt,_t=n("0e8f"),St=n("a722"),Ct=Object(c["a"])(Pt,tt,et,!1,null,null,null),xt=Ct.exports;l()(Ct,{VBtn:d["a"],VFlex:_t["a"],VForm:G["a"],VLayout:St["a"],VProgressCircular:b["a"],VTextField:Q["a"]}),r["a"].use(w["a"]);var Mt=[{path:"/",name:"home",component:Z},{path:"/secretSanta/:id",name:"secretSanta",component:xt}],kt=new w["a"]({mode:"history",base:"/",routes:Mt}),Et=kt,Tt=n("08a9"),Rt=n("3efc");r["a"].use(S["a"]);var $t=new S["a"].Store({state:{web3:{},contractInstance:null,santaContractInstance:null},getters:{web3:Object(Tt["a"])("web3"),account:Object(Rt["a"])(null,["web3","account"]),contractInstance:Object(Tt["a"])("contractInstance"),santaContractInstance:Object(Tt["a"])("santaContractInstance")},mutations:{setWeb3:function(t,e){t.web3=e},setContract:function(t,e){t.contractInstance=function(){return e}},setSantaContract:function(t,e){t.santaContractInstance=function(){return e}}},actions:{initContract:function(t){var e=t.commit;q().then((function(t){e("setContract",t)})).catch((function(t){console.log("error in action initContract",t)}))},initSantaContract:function(t,e){var n=t.commit;N(e).then((function(t){n("setSantaContract",t)})).catch((function(t){console.log("error in action initSantaContract",t)}))},initWeb3:function(t){var e=t.commit;W.then((function(t){e("setWeb3",t)})).catch((function(t){console.log("error in action initWeb3",t)}))}}}),Dt=n("f309");r["a"].use(Dt["a"]);var Ft=new Dt["a"]({});n("7e7d");r["a"].config.productionTip=!1,window.$eventHub=new r["a"],new r["a"]({router:Et,store:$t,vuetify:Ft,render:function(t){return t(g)}}).$mount("#app")},"7e7d":function(t,e,n){},ef64:function(t,e,n){}});
//# sourceMappingURL=app.4df31f46.js.map